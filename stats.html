<script type="module">
  import { read, utils } from 'https://cdn.sheetjs.com/xlsx-0.19.3/package/xlsx.mjs';
  import { Chart } from 'https://cdn.jsdelivr.net/npm/chart.js@4.4.0/+esm';

  async function loadCharts() {
    const response = await fetch('https://raw.githubusercontent.com/Evelez23/-microdelecion/main/listaPacientes.xlsx');
    const data = await response.arrayBuffer();
    const workbook = read(data);
    const pacientes = utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);

    // Procesar datos para gráficos
    const generos = pacientes.reduce((acc, p) => {
      acc[p['*GÃ©nero']] = (acc[p['*GÃ©nero']] || 0) + 1;
      return acc;
    }, {});

    new Chart(document.getElementById('generoChart'), {
      type: 'pie',
      data: {
        labels: Object.keys(generos),
        datasets: [{
          data: Object.values(generos),
          backgroundColor: ['#FF6B6B', '#4A6FA5']
        }]
      }
    });
  }

  loadCharts();
</script>
